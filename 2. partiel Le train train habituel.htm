<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" 
	"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd">
<html xml:lang="fr" lang="fr" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<meta name='generator' content='SPIP 2.1.26' />
<meta name='language' content='fr' />
<meta name='description' content='PACS 2013 2014' />
<link rel='stylesheet' type='text/css' media='all'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=config-placement.css' />
<link rel='stylesheet' type='text/css' media='screen, projection' 
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=config.css&amp;spec=Licence' />
<link rel='stylesheet' type='text/css'  media='print'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/../extensions/DidacSPIP/css/impression.css' />
<link rel='stylesheet' type='text/css' 
	media='handheld, only screen and (max-device-width: 480px)'
	href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/../extensions/DidacSPIP/css/handheld.css' />
<link rel="alternate"
	type="application/rss+xml"
	title="Syndiquer cette rubrique"
	href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=backend-breves&amp;id_rubrique=12&amp;titre= 14/05/2014"
/><link rel="search" type="application/opensearchdescription+xml" 
	href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=opensearch.xml"
	title="PACS 2013 2014" />
<script type='text/javascript' src='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/../extensions/DidacSPIP/prive/javascript/admin_check.js'></script>
<title>2. Le train train habituel (PACS 2013 2014)</title>
</head><body class="default-parameters">
<div id="navigation-upmc">
	<div class="menu-lv1">
		<a class='menu-logo' href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/ecrire/'
			title='Espace priv&eacute;'>Espace priv&eacute;</a>
	</div>
	<div class="menu-lv1"><a href="http://www.upmc.fr" title="Universit&eacute; Pierre et Marie Curie">UPMC</a></div>
	<div class='menu-lv1 fs80'><a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev" title="Accueil du site">PACS 2013 2014</a></div>
	<div class="menu-lv1"><a href='../pacs' title="Programmation des Architectures Clients-serveur">pacs</a></div>


<div class="menu-lv1">Navigation dans la page</div><ul class="menu-lv1">
<li class='menu-lv2'><a href='#a1'>Dare-dare des villes&nbsp;!</a></li>
<li class='menu-lv2'><a href='#a2'>Quelle ville&nbsp;?</a></li>
<li class='menu-lv2'><a href='#a3'>Eliminer les villes viles</a></li>
<li class='menu-lv2'><a href='#a4'>AJAX le magicien</a></li>
<li class='menu-lv2'><a href='#a5'>Quelle date&nbsp;?</a></li>
<li class='menu-lv2'><a href='#a6'>Style loving you</a></li>
<li class='menu-lv2'><a href='#a7'>Quels trains&nbsp;?</a></li>
<li class='menu-lv2'><a href='#a8'>Sur un air de SAX</a></li>
<li class='menu-lv2'><a href='#a9'>Choisis ton train</a></li>
<li class='menu-lv2'><a href='#a10'>Sélection des trains</a></li>
<li class='menu-lv2'><a href='#a11'>Un heureux évènement</a></li>
<li class='menu-lv2'><a href='#a12'>Avant le calendrier</a></li>
<li class='menu-lv2'><a href='#a13'>Annexes</a></li>
</ul>


<div class="menu-lv1">
Authentifi&eacute; sous<br />KOSTRIKOVA ANNA</div>	<div class="menu-lv1-last">&nbsp;</div>
</div><div id="content">

<h1>pacs&nbsp;: Contr&ocirc;les des Connaissances<br />2. Le train train habituel<br />examen 14/05/2014</h1>

<h2 style="text-align: center; color: red">KOSTRIKOVA ANNA&nbsp;: 27/60</h2><div style='text-align: center;'>
Derni&egrave;re importation
14 mai 2014 &agrave; 17h10min
</div>
<script type='text/javascript'>
derniere_modification = 1400080253;
</script><script type='text/javascript'>
if (typeof(duree_examen) != "undefined") {
	rafraichir_lire(3264006,
		437,
		derniere_modification,
		15*60*1000); } // duree de l'alarme en milli-secondes: 1/4h
</script><p>Cette épreuve consiste à réaliser une application pour la réservation en ligne de billets de train. Les trains existants sont disponibles sur un serveur délivrant un flux XML. La recherche d&#8217;un voyage se déroule en 3 étapes&nbsp;:</p>

<ol class="spip"><li> saisir une ville de départ ou la choisir dans une liste,</li><li> choisir une date de voyage,</li><li> sélectionner le ou les trajets parmi ceux qui sont proposés.</li></ol>
<p>Quand un ou plusieurs trajets sont sélectionnés, un calendrier ICS concernant les voyages sera synthétisé et envoyé à l&#8217;utilisateur de l&#8217;application. Bien que l&#8217;examen prenne la forme d&#8217;un problème, les questions sont assez indépendantes.</p>
<p>Notes sur 60</p>
<div id='sequence437'>
<span id='e3610'></span>


<h2 id='a1'>1 Dare-dare des villes&nbsp;! <small>(4&nbsp;point(s))</small></h2>
<p>On s&#8217;intéresse tout d&#8217;abord à l&#8217;écriture d&#8217;un script PHP nommé <tt>listeVilles.php</tt> qui retourne, au format MIME <tt>text/plain</tt> et de Charset <tt>utf-8</tt>, une liste de villes séparées par des point-virgules.</p>

<p>Appelé en méthode GET, ce script peut recevoir le paramètre <tt>ville</tt> qui contient une chaîne de caractères restreignant ces villes à celles commençant par cette chaîne, sans tenir compte de la différence entre minuscules et majuscules. Par exemple, si le script repose sur la liste de villes suivantes&nbsp;:</p>

<div class='spip_code'><code>$villes = array('Angers', 'Bordeaux', 'Caen', 'Lille', 'Lyon', 'Marseille', 'Montpellier', 'Nice', 'Paris', 'Pau', 'Rennes', 'Strasbourg', 'Tours');</code></div>
<p>L&#8217;appel du script par
<code class='spip_code'>listeVilles.php?ville=Pa</code>, devra retourner  <code class='spip_code'>Pau;Paris;</code> (le point-virgule final est optionnel).  Ecrire ce script, qui comportera le tableau ci-dessus.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=868&amp;cle=ede174339f09605ec957c75289d75b9f7d0f73da&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FlisteVilles.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger listeVilles.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$villes&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Angers'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Bordeaux'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Caen'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Lille'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Lyon'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Marseille'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Montpellier'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Nice'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Paris'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Pau'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Rennes'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Strasbourg'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'Tours'</span><span style="color: #007700">);<br /><br />if&nbsp;(!empty(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;construire&nbsp;l'expression&nbsp;rationnelle&nbsp;une&nbsp;fois&nbsp;pour&nbsp;toutes&nbsp;les&nbsp;iterations<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$re&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'/^'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'/i'</span><span style="color: #007700">;<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$villes&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #0000BB">$re</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$v</span><span style="color: #007700">))&nbsp;unset(</span><span style="color: #0000BB">$villes</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]);<br />&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-type:&nbsp;text/plain;charset=utf-8"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">join</span><span style="color: #007700">(</span><span style="color: #DD0000">';'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$villes</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> vérification de la requête</li><li> expression rationnelle</li><li> header</li><li> construction de la réponse avec les "&nbsp;;"</li></ol></div>
</div>
 
 <div id='reponses3610'>
<ul class="forum-total">

<li class="forum-fil" id="forum6916"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h57min 
	<div><div class="spip_code"><code>&lt;?php<br />
$res='';<br />
$villes=array('Angers','Bordeaux','Caen','Lille','Lyon','Marseille','Montpellier','Nice','Paris','Pau','Rennes','Strasbourg','Tours');<br />
foreach($villes as $villeC)<br />
 &nbsp;if(preg_match(&quot;/^3.$villeC/i&quot;,$_GET['ville']))<br />
 &nbsp; &nbsp;$res .= $villeC.';';<br />
return $res;<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum7533" class="correction">
	<div>note&nbsp;1 / 4<br />par  Saint-James Emmanuel</div>
	<div><ul class="spip"><li>  vérification de la requête
_&nbsp;: 0</li><li>  expression rationnelle
_&nbsp;: 0</li><li>  header
_&nbsp;: 0</li><li>  construction de la réponse avec les "&nbsp;;"&nbsp;: 1</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3611'></span>


<h2 id='a2'>2 Quelle ville&nbsp;? <small>(6&nbsp;point(s))</small></h2>
<p>Il s&#8217;agit à présent d&#8217;écrire une page HTML permettant de choisir la ville de départ, grâce à un formulaire contenant&nbsp;:</p>

<ul class="spip"><li> un libellé proposant de saisir un nom de ville&nbsp;;</li><li> une balise de saisie  de nom <tt>ville</tt>&nbsp;;</li><li> une liste de sélection <a href="http://fr.wikipedia.org/wiki/select" class='spip_glossaire' title="hmlt" rel='external'>select</a> de nom <tt>liste-choix</tt>&nbsp;;</li><li> un bouton de soumission avec le texte "Choix de la date".</li></ul>
<p>La balise  <a href="http://fr.wikipedia.org/wiki/select" class='spip_glossaire' title="hmlt" rel='external'>select</a> sera modifiée dynamiquement par des fonctions JavaScript, et n&#8217;a donc pas besoin de contenir des balises <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-OPTION" class='spip_glossaire' title="html" rel='external'>option</a> au départ. Les fonctions Javascript seront définies dans deux fichiers  nommés <tt>manipulationDOM.js</tt> et <tt>ajax.js</tt> que la  page HTML doit donc charger. Dès à présent,  la  balise  <a href="http://fr.wikipedia.org/wiki/select" class='spip_glossaire' title="hmlt" rel='external'>select</a> doit prévoir qu&#8217;à chaque choix dans la liste (événement <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/scripts.html#adef-onchange" class='spip_glossaire' title="html" rel='external'>onchange</a>), la valeur sélectionnée, accessible dans son attribut  <a href="http://fr.wikipedia.org/wiki/value" class='spip_glossaire' title="hmlt" rel='external'>value</a>, sera recopiée dans la balise de saisie. Ainsi, un utilisateur qui choisit un nom de ville dans la liste de sélection le verra s&#8217;inscrire immédiatement dans le champ de saisie texte.</p>

<p>Ces fichiers comporteront en particulier une fonction Javascript nommée <tt>request</tt>, qui prend en argument un nœud du DOM.&nbsp;La page HTML devra appliquer cette fonction sur le nœud pointant sur la balise de saisie de la ville&nbsp;:</p>

<ul class="spip"><li> au chargement du document&nbsp;;</li><li> à chaque changement du contenu de la balise de saisie.</li></ul>
<p>Enfin, le formulaire ne sera envoyé au script <tt>choixDate.php</tt> que si la saisie <tt>ville</tt> n&#8217;est pas vide.
Ecrire la page HTML <tt>saisieVille.html</tt> respectant ces spécifications et la grammaire XHTML Basic 1.1, sans oublier de rappeler le Charset utilisé.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=873&amp;cle=d035b3e1f6cfdca35f62c4159d8de1bd5975b6c9&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FsaisieVille.html"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger saisieVille.html</a>
</div>
<p><code><span style="color: #000000">
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;XHTML&nbsp;Basic&nbsp;1.1//EN"&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"&gt;<br />&lt;html&nbsp;xml:lang="fr"&nbsp;lang="fr"&nbsp;xmlns="http://www.w3.org/1999/xhtml"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv='content-type'&nbsp;content='text/html;&nbsp;charset=UTF-8'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Réservation&nbsp;de&nbsp;billets&lt;/title&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type='text/javascript'&nbsp;src='ajax.js'&gt;&lt;/script&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;script&nbsp;type='text/javascript'&nbsp;src='manipulationDOM.js'&gt;&lt;/script&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&nbsp;onload='request(document.getElementById("ville"))'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;form&nbsp;action="choixDate.php"&nbsp;method="post"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onsubmit="return&nbsp;(this.elements['ville'].value!='')"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;fieldset&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;label&nbsp;for='ville'&gt;Saisir&nbsp;la&nbsp;ville&nbsp;de&nbsp;départ&lt;/label&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type='text'&nbsp;id='ville'&nbsp;name='ville'&nbsp;onchange='request(this);'/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;select&nbsp;id='liste-choix'<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onchange='document.getElementById("ville").value&nbsp;=&nbsp;this.value'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/select&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;input&nbsp;type='submit'&nbsp;value='Choix&nbsp;de&nbsp;la&nbsp;date'&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/form&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br />&lt;/html&gt;<br /></span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> DOCTYPE et en-tête Head</li><li> onload dans body</li><li> onsubmit, method et action</li><li> onchange sur Input</li><li> onchange sur Select</li><li> autres éléments du formulaire&nbsp;: fieldset, label, submit</li></ol></div>
</div>
 
 <div id='reponses3611'>
<ul class="forum-total">

<li class="forum-fil" id="forum6917"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h59min 
	<div><div class="spip_code"><code>&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML Basic 1.1//EN' 'http://www.w3.org/TR/XHTML-basic/xhtml-basic11.dtd'&gt;<br />
&lt;html&gt;<br />
 &nbsp;&lt;head&gt;<br />
 &nbsp; &nbsp;&lt;meta http-equiv='Content-Type' content='text/plain;charset=utf-8'&gt;<br />
 &nbsp; &nbsp;&lt;link rel='stylesheet' href=='cal.css' type='text/css/'/&gt;<br />
 &nbsp; &nbsp;&lt;title&gt;saisieVille&lt;/title&gt;<br />
 &nbsp; &nbsp;&lt;script type='text/javascript' href='manipulationDOM.js'&gt;&lt;/script&gt;<br />
 &nbsp; &nbsp;&lt;script type='text/javascript' href='ajax.js'&gt;&lt;/script&gt;<br />
 &nbsp;&lt;/head&gt;<br />
<br />
 &nbsp;&lt;body onload=&quot;request(document.getElementById('ville');&quot;&gt;<br />
 &nbsp; &nbsp;&lt;form method='GET' action='choixDate.php'&gt;<br />
 &nbsp; &nbsp; &nbsp;&lt;fieldset&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;label for='ville' &gt;saisissez un nom de ville&lt;/label&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;input id='ville' type='text' name='ville'/&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type='select' name='liste-choix' onchange=&quot;document.getElementById(\'ville\').value=this.value;request(document.getElementById('ville'));&quot;/&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type='submit' value='Choix de la date'/&gt;<br />
 &nbsp; &nbsp; &nbsp;&lt;/fieldset&gt;<br />
 &nbsp; &nbsp;&lt;/form&gt; &nbsp;<br />
 &nbsp;&lt;/body&gt;<br />
&lt;/html&gt;</code></div></div>
	    </div>

<ul>

<li id="forum7565" class="correction">
	<div>note&nbsp;4 / 6<br />par  adm</div>
	<div><ul class="spip"><li>  DOCTYPE et en-tête Head
_&nbsp;: 1</li><li>  onload dans body
_&nbsp;: 1</li><li>  onsubmit, method et action
_&nbsp;: 0</li><li>  onchange sur Input
_&nbsp;: 0</li><li>  onchange sur Select
_&nbsp;: 1</li><li>  autres éléments du formulaire&nbsp;: fieldset, label, submit&nbsp;: 1</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3612'></span>


<h2 id='a3'>3 Eliminer les villes viles <small>(6&nbsp;point(s))</small></h2>
<p>On se propose maintenant de définir deux fonctions Javascript 
employant les requêtes asynchrones AJAX pour dynamiser la page <tt>saisieVille.html</tt>.</p>

<p>La première fonction, <tt>removeChildren</tt>, prend en argument un nœud du DOM et supprime tous ses fils. Cette fonction sera notamment appelée sur la liste de villes <tt>liste-choix</tt> pour la remettre à zéro avant de mettre à jour la liste des villes répondant aux nouveaux critères de l&#8217;utilisateur.</p>

<p>La seconde fonction, <tt>generateOptionsFromText</tt>, prend en argument le nœud du DOM représentant la balise <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-SELECT" class='spip_glossaire' title="html" rel='external'>select</a> et une chaîne de caractères contenant une liste de villes au format texte, séparées par des "&nbsp;;". Cette fonction doit extraire de cette chaîne chaque ville et en faire une balise  <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#edef-OPTION" class='spip_glossaire' title="html" rel='external'>option</a> accrochée au nœud. Elle ajoutera de plus un élément vide en début de liste, afin d&#8217;éviter que l&#8217;utilisateur distrait ne se voit imposer la première ville venue.</p>

<p>Indications&nbsp;: on peut s&#8217;aider des fonctions Javascript suivantes&nbsp;:</p>

<ul class="spip"><li> <tt>node.hasChildNodes()</tt>&nbsp;: renvoie <code class='spip_code'>true</code> si et seulement si le nœud DOM auquel la fonction s&#8217;applique possède au moins un fils&nbsp;;</li><li> <tt>node.lastChild</tt> retourne le dernier fils d&#8217;un nœud DOM&nbsp;;</li><li> <tt>node.removeChild(otherNode)</tt> supprime un fils d&#8217;un nœud DOM.</li></ul>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=869&amp;cle=0277ed2cf663e424ceb2895a9fddf76ba126d57f&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FmanipulationDOM.js"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger manipulationDOM.js</a>
</div>
<pre>// Fonction qui supprime tous les fils d'un noeud du DOM
function removeChildren(node){
	while (node.hasChildNodes()){
		node.removeChild(node.lastChild);
	}
}

// Fonction qui prend en entrée un texte séparé par des ';' et insère
// chaque texte comme une option de la balise select passée en argument
function generateOptionsFromText(select, response){
	var tmp = response;
	select.appendChild(document.createElement('option'));
	while (res = /([^;]+);(.*)/.exec(tmp)){
		opt = document.createElement('option');
		opt.setAttribute('value', res[1]);
		txt = document.createTextNode(res[1]);
		opt.appendChild(txt);
		select.appendChild(opt);
		tmp = res[2];
	}
}
</pre>
<div>Bar&egrave;me<ol class="spip"><li> boucle while(node.hasChildNodes())</li><li> removeChild + lastChild ou firstChild</li><li> définition expression rationnelle</li><li> utilisation dans le while pour segmenter la chaîne de réponse</li><li> createElement et createTextNode</li><li> appendChild</li></ol></div>
</div>
 
 <div id='reponses3612'>
<ul class="forum-total">

<li class="forum-fil" id="forum6918"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 17h10min 
	<div><div class="spip_code"><code>function removeChildren(liste-choix) {<br />
 &nbsp;while(liste-choix.hasChildrenNodes())<br />
 &nbsp; &nbsp;liste-choix.removeChild();<br />
}<br />
<br />
function generateOptionsFromText(select,listeVilles) {<br />
 &nbsp;var villes=explode(listeVilles,';'); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;!-- ?? --&gt;<br />
 &nbsp;select.appendChild('&lt;option&gt;&lt;/option&gt;');<br />
 &nbsp;for (ville in villes)<br />
 &nbsp; &nbsp;select.appendChild ('&lt;option&gt;' + ville + '&lt;/option&gt;');<br />
}</code></div></div>
	    </div>

<ul>

<li id="forum7636" class="correction">
	<div>note&nbsp;2 / 6<br />par  adm</div>
	<div><ul class="spip"><li>  boucle while(node.hasChildNodes())
_&nbsp;: 1</li><li>  removeChild + lastChild ou firstChild
_&nbsp;: 0</li><li>  définition expression rationnelle
_&nbsp;: 0</li><li>  utilisation dans le while pour segmenter la chaîne de réponse
_&nbsp;: 1</li><li>  createElement et createTextNode
_&nbsp;: 0</li><li>  appendChild&nbsp;: 0</li></ul>
<p>Vous mélangez PHP et JavaScript.</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3613'></span>


<h2 id='a4'>4 AJAX le magicien <small>(5&nbsp;point(s))</small></h2>
<p>Comme annoncé, à chaque fois que l&#8217;utilisateur modifie le contenu du champ de saisie texte <tt>ville</tt> on souhaite que le contenu de la liste de sélection des villes <tt>liste-choix</tt> se mette à jour.</p>

<p>Pour ce faire, la solution proposée repose sur des requêtes asynchrones qui interrogent en méthode GET  le script PHP <tt>listeVilles.php</tt> restreignant la recherche des villes, en lui envoyant  le contenu du champ de saisie <tt>ville</tt>.</p>

<p>Les requêtes asynchrones seront déclenchées à l&#8217;aide de la fonction étudiée en cours qui vous est rappelée ci-après.</p>

<div class='spip_code'><code>function ajax(url, flux, rappel, method) {<br />
 &nbsp;var r = window.XMLHttpRequest ? new XMLHttpRequest() :<br />
 &nbsp; &nbsp;(window.ActiveXObject ? &nbsp;new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;) : '');<br />
 &nbsp;if (!r) return false;<br />
 &nbsp;r.onreadystatechange = function () {rappel(r);};<br />
 &nbsp;r.open(method ? method : 'GET', url, true);<br />
 &nbsp;if (flux)<br />
 &nbsp; &nbsp; &nbsp;r.setRequestHeader(&quot;Content-Type&quot;, <br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;application/x-www-form-urlencoded; &quot;);<br />
 &nbsp;r.send(flux);<br />
 &nbsp;return true;<br />
}</code></div>
<p>L&#8217;utilisation de cette fonction  <tt>ajax</tt> impose de lui donner en premier argument le nom du script suivi de sa <tt>query_string</tt>, et en troisième argument la fonction de rappel traitant la réponse du script.</p>

<p>Écrire la  fonction de rappel <tt>insertion</tt> qui prend en argument un objet <tt>XMLHttpRequest</tt> et qui, si la réponse est correcte (statut HTTP 200) vide tout d&#8217;abord la liste de sélection <tt>liste-choix</tt> et ensuite y insère les nouvelles options à partir de la réponse reçue. Vous utiliserez pour cela les fonctions écrites à la question précédente.</p>

<p>Écrire ensuite une fonction <tt>request</tt> qui prend en argument un lien vers le nœud DOM nommé <tt>ville</tt> et réalise la requête asynchrone vers le script <tt>listeVilles.php</tt> avec pour fonction de rappel la fonction <tt>insertion</tt>.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=865&amp;cle=4b0bbfcbbab29edb10fbd88e86151a19bbcd57c6&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2Fajax.js"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger ajax.js</a>
</div>
<pre>function ajax(url, flux, rappel, method) {
  var r = window.XMLHttpRequest ? new XMLHttpRequest() :
    (window.ActiveXObject ?  new ActiveXObject("Microsoft.XMLHTTP") : '');
  if (!r) return false;
  r.onreadystatechange = function () {rappel(r);};
  r.open(method ? method : 'GET', url, true);
  if (flux)
      r.setRequestHeader("Content-Type", 
                         "application/x-www-form-urlencoded; ");
  r.send(flux);
  return true;
}

function request(textInput) {
    ajax('listeVilles.php?ville=' + textInput.value, '', insertion);
}

function insertion(xhr){
var r;
    if (xhr.readyState === 4){
		if (xhr.status === 200) {
			var liste = document.getElementById('liste-choix');
			removeChildren(liste);
			generateOptionsFromText(liste, xhr.responseText);
		} else { 
			alert('status ' + xhr.status);
		}
	}
}
</pre>
<div>Bar&egrave;me<ol class="spip"><li> test sur readyState</li><li> test sur le statut HTTP</li><li> suppression des fils existants de liste-choix</li><li> ajout des nouveaux fils</li><li> appel correct à ajax avec la query_string et l&#8217;argument insertion</li></ol></div>
</div>
 
 <div id='reponses3613'>
<ul class="forum-total">

<li class="forum-fil" id="forum7108"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 17h10min 
	<div><div class="spip_code"><code>function ajax(url, flux, rappel, method) {<br />
 var r = window.XMLHttpRequest ? new XMLHttpRequest() :<br />
 &nbsp; (window.ActiveXObject ? &nbsp;new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;) : '');<br />
 if (!r) return false;<br />
 r.onreadystatechange = function () {rappel(r);};<br />
 r.open(method ? method : 'GET', url, true);<br />
 if (flux)<br />
 &nbsp; &nbsp; r.setRequestHeader(&quot;Content-Type&quot;,<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;application/x-www-form-urlencoded; &quot;);<br />
 r.send(flux);<br />
 return true;<br />
}<br />
<br />
function insertion(req) {<br />
 &nbsp;if(req.status==200) {<br />
 &nbsp; &nbsp;removeChildren(liste-choix);<br />
 &nbsp; &nbsp;liste-choix.appendChild();<br />
 &nbsp;}<br />
}<br />
<br />
function request(node) {<br />
 &nbsp;<br />
}</code></div></div>
	    </div>

<ul>

<li id="forum7699" class="correction">
	<div>note&nbsp;1 / 5<br />par  adm</div>
	<div><ul class="spip"><li>  test sur readyState
_&nbsp;: 0</li><li>  test sur le statut HTTP
_&nbsp;: 1</li><li>  suppression des fils existants de liste-choix
_&nbsp;: 0</li><li>  ajout des nouveaux fils
_&nbsp;: 0</li><li>  appel correct à ajax avec la query_string et l&#8217;argument insertion&nbsp;: 0</li></ul>
<p>d&#8217;où sort "liste-choix"&nbsp;?</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3614'></span>


<h2 id='a5'>5 Quelle date&nbsp;? <small>(5&nbsp;point(s))</small></h2>
<p>On souhaite maintenant écrire le script <tt>choixDate.php</tt> affichant un calendrier pour sélectionner la date du voyage. Ce script doit normalement être appelé par la méthode <tt>POST</tt> et recevoir sous le nom <tt>ville</tt> le choix effectué précédemment. Si cette information est absente, le script doit  afficher un message d&#8217;erreur et  un lien vers la première page du site pour que l&#8217;utilisateur puisse sélectionner une ville.</p>

<p>Si la ville est bien indiquée,  le script devra tout d&#8217;abord la mémoriser 
via un cookie. On pourra au choix utiliser la fonction PHP <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.setcoookie.html" class='spip_glossaire' title="php" rel='external'>setcoookie</a> ou la fonction PHP <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/PHP/html/function.session-start.html" class='spip_glossaire' title="php" rel='external'>session_start</a> avec son tableau super-global <code class='spip_code'>$_SESSION</code>.</p>

<p>Ensuite, le script doit afficher un calendrier du mois en cours sous la forme d&#8217;une <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/tables.html#edef-TABLE" class='spip_glossaire' title="html" rel='external'>table</a> HTML contenant 7 colonnes, une pour chaque jour de la semaine, et pour chaque jour la liste en colonne des dates du mois auxquelles ce jour apparaît.</p>

<p>Pour vous simplifier la tâche, la fonction produisant la 
<a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/struct/tables.html#edef-TABLE" class='spip_glossaire' title="html" rel='external'>table</a> HTML du mois en cours nommée <tt>genereCalendrier()</tt> vous est fournie dans le fichier <tt>utilitaires.php</tt> qui se trouve en annexe. Vous remarquerez que chaque date du tableau est en fait un lien hyper-texte vers la page <tt>train.php</tt> avec en requête un attribut <tt>day</tt> égal au jour en question. Ce mécanisme permet de transmettre l&#8217;information du jour choisi au script suivant qui affiche l&#8217;ensemble des trains disponibles pour le trajet souhaité.</p>

<p>Enfin, afin d&#8217;afficher au mieux le calendrier, vous insérerez un lien vers une feuille de style nommée <tt>cal.css</tt>.</p>

<p>Écrire le script <tt>choixDate.php</tt> qui réalise l&#8217;ensemble des actions demandées.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=866&amp;cle=a4ac8f1bb1ed81deb410aeef3cabb53782c3affa&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FchoixDate.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger choixDate.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />session_start</span><span style="color: #007700">();<br />include_once(</span><span style="color: #DD0000">'utilitaires.php'</span><span style="color: #007700">);<br />if&nbsp;(isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'ville'</span><span style="color: #007700">])&nbsp;AND&nbsp;!(empty(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'ville'</span><span style="color: #007700">]))){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//setcookie("ville",&nbsp;$_POST['ville'],&nbsp;3600);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'ville'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$error&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'&nbsp;Erreur'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;XHTML&nbsp;Basic&nbsp;1.1//EN"&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"&gt;<br />&lt;html&nbsp;xml:lang="fr"&nbsp;lang="fr"&nbsp;xmlns="http://www.w3.org/1999/xhtml"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv='Content-Type'&nbsp;content='text/html;&nbsp;charset=utf-8'&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Calendrier&nbsp;en&nbsp;PHP&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$error&nbsp;?&gt;</span>&lt;/title&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;link&nbsp;rel="stylesheet"&nbsp;type="text/css"&nbsp;href="cal.css"&nbsp;/&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/head&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">if&nbsp;(!empty(</span><span style="color: #0000BB">$error</span><span style="color: #007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Retour&nbsp;à&nbsp;la&nbsp;première&nbsp;page&nbsp;pour&nbsp;choisir"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;votre&nbsp;&lt;a&nbsp;href='saisieVille.php'&gt;ville&nbsp;de&nbsp;départ&lt;/a&gt;&lt;p&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Vous&nbsp;avez&nbsp;choisi&nbsp;un&nbsp;voyage&nbsp;en&nbsp;partance&nbsp;de&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/p&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;p&gt;Merci&nbsp;de&nbsp;choisir&nbsp;la&nbsp;date&nbsp;de&nbsp;votre&nbsp;voyage&nbsp;dans&nbsp;le&nbsp;calendrier&nbsp;ci-dessous&lt;/p&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;sans&nbsp;oublie&nbsp;d'afficher&nbsp;le&nbsp;resultat&nbsp;de&nbsp;cette&nbsp;fonction<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">genereCalendrier</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">?&gt;</span>&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;<br />&lt;/html&gt;</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> création du cookie </li><li> mémorisation de la ville</li><li> lien vers la feuille de styles</li><li> affichage du calendrier</li><li> gestion des erreurs</li></ol></div>
</div>
 
 <div id='reponses3614'>
<ul class="forum-total">

<li class="forum-fil" id="forum7009"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h55min 
	<div><div class="spip_code"><code>&lt;?php<br />
if(!isset($_POST['ville']))<br />
 &nbsp;echo &quot;choisissez une ville ici: &lt;link href='saisieVille.html'/&gt;&lt;br&gt;&quot;;<br />
else {<br />
 &nbsp;setcookie('ville',$_POST['ville']);<br />
 &nbsp;include 'utilitaires.php';<br />
 &nbsp;echo genereCalendrier();<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum7762" class="correction">
	<div>note&nbsp;3 / 5<br />par  adm</div>
	<div><ul class="spip"><li>  création du cookie 
_&nbsp;: 1</li><li>  mémorisation de la ville
_&nbsp;: 1</li><li>  lien vers la feuille de styles
_&nbsp;: 0</li><li>  affichage du calendrier
_&nbsp;: 1</li><li>  gestion des erreurs
_&nbsp;: 0</li></ul>
<p>Votre XHTML est loin d&#8217;être valide.</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3615'></span>


<h2 id='a6'>6 Style loving you <small>(5&nbsp;point(s))</small></h2>
<p>On souhaite donner un peu plus de relief au calendrier généré dans la page précédente à l&#8217;aide de la feuille de style <tt>cal.css</tt> qui doit réaliser les intentions suivantes&nbsp;:</p>

<ul class="spip"><li> l&#8217;ensemble des affichages doit être réalisé avec une fonte de la famille <tt>sans-serif</tt> (propriété&nbsp;: <tt>font-family</tt>)&nbsp;;</li><li> la table est ainsi présentée&nbsp;:<ul class="spip"><li> largeur&nbsp;: 30 cadratins,</li><li> marges haute et basse de 2 cadratins, les autres de 10,</li><li> remplissage (<tt>padding</tt>) d&#8217;un cadratin,</li><li> couleur de fond définie à <tt>#333333</tt>,</li><li> couleur du texte définie à <tt>#9d9d9d</tt>,</li><li> texte centré,</li><li> bords arrondis avec un rayon de 5px (propriété <tt>border-radius</tt>),</li><li> ombre portée par le contour d&#8217;une valeur égale à <code class='spip_code'>0 0 40px rgba(0,0,0,0.5)</code> (propriété <tt>box-shadow</tt>)&nbsp;;</li></ul></li><li> la légende de la table est ainsi présentée&nbsp;:<ul class="spip"><li>  couleur de police fixée à <tt>#a7a7a7</tt>,</li><li> bordure inférieure (propriété <tt>border-bottom</tt>) formée d&#8217;un trait continu (<tt>solid</tt>) de 1px d&#8217;épaisseur de couleur <tt>#484848</tt>,</li><li> taille de police double de la normale,</li><li> graisse fixée à 200&nbsp;;</li></ul></li><li> les liens hyper-texte, qu&#8217;ils soient affichés pour la première fois ou non ou survolés doivent s&#8217;afficher avec la couleur <tt>#98cd60</tt>.</li></ul>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=878&amp;cle=d27e51b08c48c032d108e1d2eddd21faea96adbc&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2Fcal.css"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger cal.css</a>
</div>
<pre>* {font-family: sans-serif;}
table {
    width: 30em;
    margin: 2em 10em 2em 10em;
    box-shadow: 0 0 40px rgba(0,0,0,0.5);
    border-radius: 5px;
    padding: 1em;
    background-color: #333333;
    color: #9d9d9d;
    text-align: center;
}
caption {
    color: #a7a7a7;
    border-bottom: 1px solid #484848;
    font-size: 2em;
    font-weight: 200;
    text-align: center;
}

a, a:hover, a:visited {
      color: #98cd60;
}
</pre>
<div>Bar&egrave;me<ol class="spip"><li> choix de la police et du centrage</li><li> taille et graisse de la police</li><li> marges intérieures et extérieures de la table</li><li> couleurs, bords arrondis et ombre portée</li><li> couleur unique pour les liens hyper-textes</li></ol></div>
</div>
 
 <div id='reponses3615'>
<ul class="forum-total">

<li class="forum-fil" id="forum7127"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 15h42min 
	<div><div class="spip_code"><code>body {<br />
font-family:sans-serif;<br />
}<br />
<br />
table {<br />
width:30em;<br />
margin-top:2em;<br />
margin-bottom:2em;<br />
margin-left:10em;<br />
margin-right:10em;<br />
text-align:center;<br />
color:#9d9d9d;<br />
background_color:#333333;<br />
border-radius:5px;<br />
box-shadow:'0 0 40px rgba(0,0,0,0.5)';<br />
padding:1em;<br />
}<br />
<br />
caption {<br />
color:#a7a7a7;<br />
border-bottom:solid;<br />
border-bottom:1px;<br />
border-bottom:color=#484848;<br />
font-size:2em;<br />
width:200;<br />
}<br />
<br />
link {<br />
color:#98cd60;<br />
}</code></div></div>
	    </div>

<ul>

<li id="forum7825" class="correction">
	<div>note&nbsp;3 / 5<br />par  adm</div>
	<div><ul class="spip"><li>  choix de la police et du centrage
_&nbsp;: 1</li><li>  taille et graisse de la police
_&nbsp;: 0</li><li>  marges intérieures et extérieures de la table
_&nbsp;: 1</li><li>  couleurs, bords arrondis et ombre portée
_&nbsp;: 1</li><li>  couleur unique pour les liens hyper-textes&nbsp;: 0</li></ul>
<p>Manque la graisse, taille ok mais syntaxe des Border inexacte. Et une classe sur "link", balise invisible, n&#8217;a pas de sens.</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3616'></span>


<h2 id='a7'>7 Quels trains&nbsp;? <small>(7&nbsp;point(s))</small></h2>
<p>La liste des trains est décrite par un texte XML indiquant pour chaque train&nbsp;:</p>

<ul class="spip"><li> son identifiant unique et son type (TGV ou Corail)&nbsp;;</li><li> sa ville et son horaire de départ&nbsp;;</li><li> sa ville et son horaire d&#8217;arrivée.</li></ul>
<p>Un exemple vous est fourni en annexe et devra être placé dans votre <tt>public_html</tt> pour test. Il devra impérativement être accédé via une requête HTTP classique et non pas lu en local.</p>

<p>Écrire une fonction <tt>recupereXML</tt> qui prend en argument un nom de serveur, un port et un chemin complet menant au fichier XML. Elle ouvre une connexion distante sur le serveur et récupère ce  fichier. Elle retourne ensuite son contenu sous la forme d&#8217;un tableau PHP dont chaque élément contient une ligne du fichier.</p>

<p>Votre fonction devra vérifier que la réponse du serveur est correcte (statut HTTP 200) et que le type du document retourné est bien <tt>application/xml</tt>. Si ce n&#8217;est pas le cas, la fonction devra retourner <tt>false</tt> ou son équivalent.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=872&amp;cle=7d42718f94bc478901b70d64eea9d714c8bc7262&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FqueryDB.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger queryDB.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">recupereXML</span><span style="color: #007700">(</span><span style="color: #0000BB">$serveur</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$port</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$file</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$sock&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fsockopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$serveur</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$port</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$sock</span><span style="color: #007700">)&nbsp;return&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fputs</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"GET&nbsp;http://$serveur:$port/$file&nbsp;HTTP/1.1\nHost:$serveur\n\n"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$rep&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">))&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">";^HTTP/\d+\.\d+\s+200;"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rep</span><span style="color: #007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">preg_match</span><span style="color: #007700">(</span><span style="color: #DD0000">"@^Content-Type:\s+application/xml@"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$rep</span><span style="color: #007700">)){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$content&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$xml&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$status&nbsp;</span><span style="color: #007700">AND&nbsp;</span><span style="color: #0000BB">$content</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!</span><span style="color: #0000BB">feof</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">))&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">[]&nbsp;=&nbsp;</span><span style="color: #0000BB">fgets</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$sock</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$xml</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> ouverture de la socket et retour faux si échec</li><li> requête HTTP correcte</li><li> test sur le statut HTTP 200</li><li> lecture des en-têtes ligne à ligne</li><li> test sur le Content-Type application/xml</li><li> lecture du corps de la réponse</li><li> construction et envoi du résultat</li></ol></div>
</div>
 
 <div id='reponses3616'>
<ul class="forum-total">

<li class="forum-fil" id="forum7150"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 15h57min 
	<div><div class="spip_code"><code>&lt;?php<br />
function recupereXML($nomServeur,$port,$fichierXML) {<br />
 &nbsp;if(...($nomServeur,$port))<br />
 &nbsp; &nbsp;return false;<br />
 &nbsp;return file($fichierXML);<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum7893" class="correction">
	<div>note&nbsp;0 / 7<br />par  adm</div>
	<div><ul class="spip"><li>  ouverture de la socket et retour faux si échec
_&nbsp;: 0</li><li>  requête HTTP correcte
_&nbsp;: 0</li><li>  test sur le statut HTTP 200
_&nbsp;: 0</li><li>  lecture des en-têtes ligne à ligne
_&nbsp;: 0</li><li>  test sur le Content-Type application/xml
_&nbsp;: 0</li><li>  lecture du corps de la réponse
_&nbsp;: 0</li><li>  construction et envoi du résultat&nbsp;: 0</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3617'></span>


<h2 id='a8'>8 Sur un air de SAX <small>(5&nbsp;point(s))</small></h2>
<p>On souhaite maintenant construire une structure de données pour indexer facilement les informations relatives aux trains issues du fichier XML précédent. On utilise pour cela un phraseur SAX qui prend en argument un tableau dont chaque élément contient une ligne de fichier XML et qui nécessite 3 preneurs d&#8217;évènements pour les ouvertures, les fermetures de balises et les évènements texte nommés respectivement <tt>ouverture</tt>, <tt>fermeture</tt> et <tt>texte</tt>.
La fonction principale du phraseur  ainsi que le preneur d&#8217;évènements texte vous sont fournis dans l&#8217;annexe et reproduits ci-dessous&nbsp;:</p>

<div class='spip_code'><code>$texte = &quot;&quot;;<br />
$trains = array();<br />
<br />
function lancer_phraseur($xml_content) {<br />
 &nbsp; &nbsp;$xml_phraseur = xml_parser_create();<br />
 &nbsp; &nbsp;xml_parser_set_option($xml_phraseur, XML_OPTION_CASE_FOLDING, 0);<br />
 &nbsp; &nbsp;xml_set_element_handler($xml_phraseur, &quot;ouverture&quot;, &quot;fermeture&quot;);<br />
 &nbsp; &nbsp;xml_set_character_data_handler($xml_phraseur, &quot;texte&quot;);<br />
<br />
 &nbsp; &nbsp;if (!$xml_content) return false;<br />
 &nbsp; &nbsp;foreach ($xml_content as $data) {<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;if (!xml_parse($xml_phraseur, $data)) return false;<br />
 &nbsp; &nbsp;}<br />
 &nbsp; &nbsp;return true;<br />
}<br />
<br />
function texte($phraseur, $data) {<br />
 &nbsp; &nbsp;global $texte;<br />
 &nbsp; &nbsp;$texte .= $data;<br />
}</code></div>
<p>Les deux preneurs <tt>ouverture</tt> et <tt>fermeture</tt> doivent modifier la variable globale <tt>$trains</tt> afin qu&#8217;elle contienne la base de données de trains sous la forme d&#8217;un tableau indexé par l&#8217;attribut ID trouvé pour chaque train.  Chaque élément  de ce tableau est un sous-tableau contenant les informations relatives au train ayant cet ID, avec les clés suivantes&nbsp;:</p>

<ul class="spip"><li> la clé &#8217;type&#8217; contient le type du train,</li><li> la clé &#8217;trajet&#8217; contient un tableau de 2 éléments indexés &#8217;depart&#8217; et &#8217;arrivee&#8217; et contenant respectivement les villes de départ et d&#8217;arrivée,</li><li> la clé &#8217;horaire&#8217; contient un tableau de 2 éléments indexés par &#8217;depart&#8217; et &#8217;arrivee&#8217; et contenant respectivement les heures de départ et d&#8217;arrivée.</li></ul>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=871&amp;cle=f7340c1a704566ab10afad56a7af9a04672aa4a4&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FparseDB.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger parseDB.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$texte&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$trains&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$current&nbsp;</span><span style="color: #007700">=&nbsp;array();<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><br />function&nbsp;</span><span style="color: #0000BB">ouverture</span><span style="color: #007700">(</span><span style="color: #0000BB">$phraseur</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$texte</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">"train"</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;A&nbsp;chaque&nbsp;occurrence&nbsp;de&nbsp;cet&nbsp;evenement,&nbsp;$current&nbsp;est&nbsp;un&nbsp;tableau&nbsp;vide<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'type'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">'trajet'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">]&nbsp;=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'heure'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$attrs</span><span style="color: #007700">[</span><span style="color: #DD0000">'heure'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$texte&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">fermeture</span><span style="color: #007700">(</span><span style="color: #0000BB">$phraseur</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;global&nbsp;</span><span style="color: #0000BB">$texte</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">"train"</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;if&nbsp;(</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">"depart"</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">"trajet"</span><span style="color: #007700">][</span><span style="color: #DD0000">"depart"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$texte</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$name&nbsp;==&nbsp;arrivee<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$current</span><span style="color: #007700">[</span><span style="color: #DD0000">"trajet"</span><span style="color: #007700">][</span><span style="color: #DD0000">"arrivee"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$texte</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> construction d&#8217;un tableau pour chaque train</li><li> gestion de l&#8217;attribut "type"</li><li> gestion du tableau du trajet de chaque train</li><li> gestion du tableau des horaires de chaque train</li><li> insertion du tableau de chaque train dans le tableau global</li></ol></div>
</div>
 
 <div id='reponses3617'>
<ul class="forum-total">

<li class="forum-fil" id="forum7194"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h09min 
	<div><div class="spip_code"><code>&lt;?php<br />
$texte = &quot;&quot;;<br />
$trains = array();<br />
<br />
function ouverture($phraseur,$name,$attrs) {<br />
 &nbsp;global $trains;<br />
 &nbsp;$ID=$attrs['id'];<br />
 &nbsp;$type=$attrs['type'];<br />
 &nbsp;$trajet=array('depart'=&gt;$attrs['/depart'],'arrivee'=&gt;$attrs['/arrivee']);<br />
 &nbsp;$horaire=array('depart'=&gt;$attrs['/depart/@heure'],'arrivee'=&gt;$attrs['/arrivee/@heure']);<br />
 &nbsp;$trains[$ID]=array('type'=&gt;$type,'trajet'=&gt;$trajet,'horaire'=&gt;$horaire);<br />
}<br />
<br />
function fermeture($phraseur,$name) {<br />
 &nbsp;global $trains;<br />
}<br />
<br />
function texte($phraseur, $data) {<br />
 &nbsp;global $texte;<br />
 &nbsp;$texte .= $data;<br />
}<br />
<br />
function lancer_phraseur($xml_content) {<br />
 &nbsp; $xml_phraseur = xml_parser_create();<br />
 &nbsp; xml_parser_set_option($xml_phraseur, XML_OPTION_CASE_FOLDING, 0);<br />
 &nbsp; xml_set_element_handler($xml_phraseur, &quot;ouverture&quot;, &quot;fermeture&quot;);<br />
 &nbsp; xml_set_character_data_handler($xml_phraseur, &quot;texte&quot;);<br />
<br />
 &nbsp; if (!$xml_content) return false;<br />
 &nbsp; foreach ($xml_content as $data) {<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if (!xml_parse($xml_phraseur, $data)) return false;<br />
 &nbsp; }<br />
 &nbsp; return true;<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum7949" class="correction">
	<div>note&nbsp;1 / 5<br />par  adm</div>
	<div><ul class="spip"><li>  construction d&#8217;un tableau pour chaque train
_&nbsp;: 1</li><li>  gestion de l&#8217;attribut "type"
_&nbsp;: 0</li><li>  gestion du tableau du trajet de chaque train
_&nbsp;: 0</li><li>  gestion du tableau des horaires de chaque train
_&nbsp;: 0</li><li>  insertion du tableau de chaque train dans le tableau global&nbsp;: 0</li></ul>
<p>Vous n&#8217;avez pas compris grand chose à SAX.</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3619'></span>


<h2 id='a9'>9 Choisis ton train <small>(4&nbsp;point(s))</small></h2>
<p>On s&#8217;intéresse ici à l&#8217;écriture de deux fonctions pour permettre le filtrage des trains intéressants et les sélectionner.</p>

<p>Écrire tout d&#8217;abord une fonction <tt>filtreTrains</tt> qui prend en argument un tableau contenant l&#8217;ensemble de la base de trains, ainsi que le nom d&#8217;une ville de départ et qui retourne un tableau ne contenant que les trains dont la ville de départ est correcte. Ce tableau final peut être vide.</p>

<p>Écrire une fonction <tt>afficheTrains</tt> qui prend en argument le même tableau, et retourne un formulaire ainsi constitué&nbsp;:</p>

<ul class="spip"><li> la méthode sera POST, et le script traitant les saisies est nommé <tt>etapeFinale.php</tt>&nbsp;;</li><li> les saisies seront de type <tt>checkbox</tt>, avec pour attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/types.html#type-name" class='spip_glossaire' title="html" rel='external'>name</a> <tt>sélection[]</tt>, et pour attribut <a href="http://www-ari.ufr-info-p6.jussieu.fr/OUTILS/documentation/doc/html4/interact/forms.html#adef-value-INPUT" class='spip_glossaire' title="html" rel='external'>value</a> l&#8217;identifiant du train&nbsp;;</li><li> chaque saisie aura pour libellé associé un texte de forme "<i>de ville  (heure de départ) à ville (heure d&#8217;arrivée)</i>" correspond au train choisi&nbsp;;</li><li> un bouton de soumission.</li></ul>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=870&amp;cle=6979126c5ece633b3ea938a304933b1fdc15adc0&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FmanipulationTrains.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger manipulationTrains.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">filtreTrains</span><span style="color: #007700">(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ville_depart</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$trains&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$train</span><span style="color: #007700">[</span><span style="color: #DD0000">"trajet"</span><span style="color: #007700">][</span><span style="color: #DD0000">"depart"</span><span style="color: #007700">]&nbsp;!=&nbsp;</span><span style="color: #0000BB">$ville_depart</span><span style="color: #007700">)&nbsp;unset(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]);<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">;<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">afficheTrains</span><span style="color: #007700">(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">){<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$trains&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">){<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"&lt;div&gt;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;input&nbsp;type='checkbox'&nbsp;name='selection[]'&nbsp;id='$id'&nbsp;value='$id'&nbsp;/&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;label&nbsp;for='$id'&gt;&nbsp;de&nbsp;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">[</span><span style="color: #DD0000">'trajet'</span><span style="color: #007700">][</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;("&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">[</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">")"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'&nbsp;à&nbsp;'&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">[</span><span style="color: #DD0000">'trajet'</span><span style="color: #007700">][</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;("&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$train</span><span style="color: #007700">[</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">")"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;/label&gt;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;/div&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;return&nbsp;</span><span style="color: #DD0000">"&lt;form&nbsp;action='etapeFinale.php'&nbsp;method='post'&gt;&lt;fieldset&gt;\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">join</span><span style="color: #007700">(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">)&nbsp;.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;input&nbsp;type='submit'&nbsp;value='Sélectionner&nbsp;et&nbsp;envoyer&nbsp;le&nbsp;calendrier'/&gt;\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&lt;/fieldset&gt;&lt;/form&gt;\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> parcours des trains et test sur la ville de départ</li><li> balise input correcte</li><li> affichage correct du libellé</li><li> construction correcte du formulaire</li></ol></div>
</div>
 
 <div id='reponses3619'>
<ul class="forum-total">

<li class="forum-fil" id="forum7244"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h25min 
	<div><div class="spip_code"><code>&lt;?php<br />
function filtreTrains($trains,$villeDep) {<br />
 &nbsp;$res=array();<br />
 &nbsp;foreach($trains as $id=&gt;$train)<br />
 &nbsp; &nbsp;if($train['trajet']['depart']===$villeDep)<br />
 &nbsp; &nbsp; &nbsp;$res[$id]=$train;<br />
 &nbsp;return $res;<br />
}<br />
<br />
function afficheTrains($trains) {<br />
 &nbsp;$form = &quot;&lt;form method='POST' action='etapeFinale.php'&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;fieldset&gt;&quot;;<br />
<br />
 &nbsp;foreach($trains as $id=&gt;$train) <br />
 &nbsp; &nbsp;$form .= &quot; &lt;label for='&quot;.$id.&quot;'&gt;de &quot;.$train['trajet']['depart'].&quot; (&quot;.$train['horaire']['depart'].&quot;) a &quot;.$train['trajet']['arrivee'].&quot; (&quot;.$train['horaire']['arrivee'].&quot;)&lt;/label&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type='checkbox' id=&quot;.$id.&quot; name='selection[]' value=&quot;.$id.&quot;/&gt;&quot;;<br />
<br />
 &nbsp;$form .= &quot; &nbsp; &lt;input type='submit'&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/fieldset&gt;<br />
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/form&gt;&quot;;<br />
 &nbsp;return $form;<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum8006" class="correction">
	<div>note&nbsp;4 / 4<br />par  adm</div>
	<div><ul class="spip"><li>  parcours des trains et test sur la ville de départ
_&nbsp;: 1</li><li>  balise input correcte
_&nbsp;: 1</li><li>  affichage correct du libellé
_&nbsp;: 1</li><li>  construction correcte du formulaire&nbsp;: 1</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3618'></span>


<h2 id='a10'>10 Sélection des trains <small>(4&nbsp;point(s))</small></h2>
<p>On souhaite désormais écrire le script PHP <tt>trains.php</tt> qui permet à un utilisateur de choisir parmi les trains disponibles selon ses critères de ville de départ et de date.</p>

<p>Le script reçoit par la méthode <tt>GET</tt> une saisie <tt>day</tt> qui correspond au jour qui a été choisi dans le calendrier à l&#8217;étape précédente.
Si cette information est absente, le script  affiche un message d&#8217;erreur et  un lien hyper-texte pour retourner à la première page de saisie de la ville.</p>

<p>Sinon, le script doit&nbsp;:</p>

<ul class="spip"><li> récupérer le contenu du fichier XML des trains dans un tableau <tt>$trains</tt>&nbsp;;</li><li> filtrer les trains en fonction de la ville de départ choisie&nbsp;;</li><li> si aucun train ne correspond, alors le script affiche un message d&#8217;erreur avec un lien hyper-texte renvoyant vers la première page de saisie d&#8217;une ville <tt>saisieVille.php</tt>&nbsp;;</li><li> autrement, le script affiche le formulaire produit par la fonction <tt>afficheTrains</tt>.</li></ul>
<p>Comme précédemment votre script devra utiliser le cookie pour accéder au nom de la ville qui a été mémorisé. De plus afin de faciliter le traitement à l&#8217;étape suivante, il vous est demandé également de mémoriser le jour, le mois et l&#8217;année du voyage en train via le cookie.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=875&amp;cle=277f174fa2c1d2dced3fda25263148c39b54132d&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2Ftrains.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger trains.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />session_start</span><span style="color: #007700">();<br />include_once(</span><span style="color: #DD0000">'utilitaires.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'queryDB.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'parseDB.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'manipulationTrains.php'</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//define('PATH_TRAINS',&nbsp;'~labroche/train/BDTrain.xml');<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'PATH_TRAINS'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'~esj/L3/PACS/CC/2013-2014/2/BDTrain.xml'</span><span style="color: #007700">);<br /><br />if&nbsp;(empty(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'day'</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;empty(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;OR&nbsp;!</span><span style="color: #0000BB">lancer_phraseur</span><span style="color: #007700">(</span><span style="color: #0000BB">recupereXML</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">80</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PATH_TRAINS</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$msg&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&lt;h4&gt;L'opération&nbsp;ne&nbsp;peut&nbsp;être&nbsp;complétée.&nbsp;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"Retour&nbsp;à&nbsp;la&nbsp;première&nbsp;&lt;a&nbsp;href='saisieVille.html'&gt;page&lt;/a&gt;&lt;/h4&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Erreur'</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//setcookie("date",&nbsp;$_GET['day']&nbsp;.&nbsp;"/"&nbsp;.&nbsp;date('m')&nbsp;.&nbsp;"/"&nbsp;.&nbsp;date('Y'),&nbsp;3600);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"date"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'day'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"/"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'m'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"/"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"day"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'day'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"month"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'m'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"year"</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$title&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"&nbsp;le&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"date"</span><span style="color: #007700">];&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$res&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">filtreTrains</span><span style="color: #007700">(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">"ville"</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">$res</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$msg&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"&lt;h4&gt;Aucun&nbsp;train&nbsp;ne&nbsp;correspond&nbsp;à&nbsp;vos&nbsp;critères.&nbsp;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Retour&nbsp;à&nbsp;la&nbsp;première&nbsp;&lt;a&nbsp;href=\"saisieVille.html\"&gt;page&lt;/a&gt;&lt;/h4&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</span><span style="color: #0000BB">$msg&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">afficheTrains</span><span style="color: #007700">(</span><span style="color: #0000BB">$res</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;"-//W3C//DTD&nbsp;XHTML&nbsp;Basic&nbsp;1.1//EN"&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"&gt;<br />&lt;html&nbsp;xml:lang="fr"&nbsp;lang="fr"&nbsp;xmlns="http://www.w3.org/1999/xhtml"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;head&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta&nbsp;http-equiv='content-type'&nbsp;content='text/html;&nbsp;charset=UTF-8'&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Réservation&nbsp;de&nbsp;train&nbsp;pour&nbsp;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$title&nbsp;?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<span style="color: #0000BB">&lt;?php&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$msg&nbsp;?&gt;</span>&lt;/body&gt;<br />&lt;/html&gt;<br /></span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> test de la présence de la valeur &#8217;day&#8217;</li><li> mémorisation des nouvelles valeurs via le cookie</li><li> récupération et filtrage du tableau de trains</li><li> gestion de l&#8217;erreur d&#8217;absence de train</li></ol></div>
</div>
 
 <div id='reponses3618'>
<ul class="forum-total">

<li class="forum-fil" id="forum7297"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h41min 
	<div><div class="spip_code"><code>&lt;?php<br />
include 'manipulationTrains.php';<br />
<br />
if(!isset($_GET['day']))<br />
 &nbsp;echo &quot;choisissez le jour : &lt;link href='saisieVille.html'/&gt;&quot;;<br />
<br />
else {<br />
 &nbsp;setcookie('day',$_GET['day']);<br />
 &nbsp;setcookie('mois',$_GET['month']);<br />
 &nbsp;setcookie('annee',$_GET['year']);<br />
 &nbsp;$trains=recupereXML('queryBD.php',80,'BDTrain.xml');<br />
 &nbsp;$trains=filtreTrains($trains,$_COOKIE['ville']);<br />
 &nbsp;if(empty($trains)) <br />
 &nbsp; &nbsp;echo &quot;aucune train ne correspond, reessayez: &lt;link href='saissieVille.php'/&gt;&quot;;<br />
 &nbsp;else<br />
 &nbsp; &nbsp;echo afficheTrains($trains);<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum8057" class="correction">
	<div>note&nbsp;2<br />par  adm</div>
	<div><ul class="spip"><li>  test de la présence de la valeur &#8217;day&#8217;
_&nbsp;: 1</li><li>  mémorisation des nouvelles valeurs via le cookie
_&nbsp;: 0</li><li>  récupération et filtrage du tableau de trains
_&nbsp;: 0</li><li>  gestion de l&#8217;erreur d&#8217;absence de train&nbsp;: 1</li></ul>
<p>Approximatif</p></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3620'></span>


<h2 id='a11'>11 Un heureux évènement <small>(4&nbsp;point(s))</small></h2>
<p>Écrire une fonction <tt>trainToEvent</tt> qui prend en argument le tableau des trains lu à partir du fichier XML, un tableau d&#8217;identifiants de train, un jour, un mois et une année et qui retourne une chaîne de caractères formée de tous les évènements au format ICS relatifs aux trains dont les identifiants sont indiqués par le deuxième argument. On rappelle qu&#8217;un événement ICS a le format suivant&nbsp;:</p>
<div class='spip_code'><code>BEGIN:VEVENT<br />
DTSTART: date et heure du début de l'événement (ici le départ)<br />
DTEND: date et heure de sa fin (ici l'arrivée)<br />
SUMMARY: de ville de départ à ville d'arrivée<br />
END:VEVENT</code></div>
<p>Les dates devront être au format ICS à savoir une concaténation de l&#8217;année, du mois, du jour, suivis d&#8217;un "T" et de l&#8217;horaire tel qu&#8217;il apparait dans le fichier XML enfin suivis de la chaîne "00" pour les secondes.</p>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=874&amp;cle=24cfe6f88b9b976f4ed50f93f92dc7157fb417e0&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FtrainToEvent.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger trainToEvent.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">trainToEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ids</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$day</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$month</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$year</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$ids&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$k&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isset(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset(</span><span style="color: #0000BB">$ids</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]);&nbsp;</span><span style="color: #FF8000">//&nbsp;ne&nbsp;devrait&nbsp;pas&nbsp;arriver<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$h_dep&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'T'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">][</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'00'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$h_arr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'T'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">][</span><span style="color: #DD0000">'horaire'</span><span style="color: #007700">][</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">'00'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t_dep&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">][</span><span style="color: #DD0000">'trajet'</span><span style="color: #007700">][</span><span style="color: #DD0000">'depart'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$t_arr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$trains</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">][</span><span style="color: #DD0000">'trajet'</span><span style="color: #007700">][</span><span style="color: #DD0000">'arrivee'</span><span style="color: #007700">];<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ids</span><span style="color: #007700">[</span><span style="color: #0000BB">$k</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">"BEGIN:VEVENT\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"DTSTART:$year$month$day$h_dep\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"DTEND:$year$month$day$h_arr\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"SUMMARY:de&nbsp;$t_dep&nbsp;à&nbsp;$t_arr\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"END:VEVENT\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">join</span><span style="color: #007700">(</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ids</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> filtrage des trains par identifiant&nbsp;: parcours et test</li><li> construction des dates de début et de fin</li><li> construction de la chaîne de résumé</li><li> construction de la sortie au format ICS</li></ol></div>
</div>
 
 <div id='reponses3620'>
<ul class="forum-total">

<li class="forum-fil" id="forum7334"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h48min 
	<div><div class="spip_code"><code>&lt;?php<br />
function trainToEvent($trains,$id,$jour,$mois,$annee) {<br />
 &nbsp;$res='';<br />
 &nbsp;$train=$trains[$id]) <br />
 &nbsp;$res .= &quot;BEGIN.VEVENT&quot;;<br />
 &nbsp;$res .= &quot;DTSTART:&quot;.$annee.$mois.$jour.&quot;T&quot;.$train['horaires']['depart'].&quot;00&quot;;<br />
 &nbsp;$res .= &quot;DTEND:&quot;.$annee.$mois.$jour.&quot;T&quot;.$train['horaires']['arrivee'].&quot;00&quot;;;<br />
 &nbsp;$res .= &quot;SUMMARY: de &quot;.$train['trajet']['depart'].&quot; a &quot;.$train['trajet']['arrivee'];<br />
 &nbsp;$res .= &quot;END:VEVENT&quot;;<br />
 &nbsp;return $res;<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum8097" class="correction">
	<div>note&nbsp;3 / 4<br />par  adm</div>
	<div><ul class="spip"><li>  filtrage des trains par identifiant&nbsp;: parcours et test
_&nbsp;: 0</li><li>  construction des dates de début et de fin
_&nbsp;: 1</li><li>  construction de la chaîne de résumé
_&nbsp;: 1</li><li>  construction de la sortie au format ICS&nbsp;: 1</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3621'></span>


<h2 id='a12'>12 Avant le calendrier <small>(5&nbsp;point(s))</small></h2>
<p>Écrire un script PHP nommé <tt>etapeFinale.php</tt> qui est supposé recevoir par la méthode <tt>POST</tt> une saisie nommée <tt>selection</tt>, qui est un tableau contenant les indices des trains qui ont été retenus par l&#8217;utilisateur. Si cette information est absente, le script affiche un message d&#8217;erreur brut.</p>

<p>Si l&#8217;information est présente, le script envoie une description au format calendrier ICS de l&#8217;ensemble des trains réservés. Vous veillerez notamment&nbsp;:</p>

<ul class="spip"><li> à préciser le type de contenu <tt>text/calendar</tt> de Charset <tt>utf-8</tt> lors de l&#8217;envoi de votre réponse,</li><li> à permettre une sauvegarde avec un nom approprié côté client, en ajoutant un en-tête <tt>Content-Disposition: attachment; filename='le_nom_de_votre_calendrier.ics'</tt>.</li></ul>
<p>Pour mémoire, un fichier ICS valide est formé des balises suivantes qui encadrent l&#8217;ensemble des VEVENT&nbsp;:</p>
<div class='spip_code'><code>BEGIN:VCALENDAR<br />
VERSION:2.0<br />
<br />
BEGIN:VEVENT<br />
...<br />
END:VEVENT<br />
...<br />
<br />
END:VCALENDAR</code></div>


<div class='solution'>
<div>Solution
<a href="https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=867&amp;cle=2b5ce1b7e4fd2d0f2d5846408f7154275f6ec3a1&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FetapeFinale.php"
      style='float:right'
      class='solution'>T&eacute;l&eacute;charger etapeFinale.php</a>
</div>
<p><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//define('PATH_TRAINS',&nbsp;'~labroche/train/BDTrain.xml');<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'PATH_TRAINS'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'~esj/L3/PACS/CC/2013-2014/2/BDTrain.xml'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'utilitaires.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'trainToEvent.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'queryDB.php'</span><span style="color: #007700">);<br />include_once(</span><span style="color: #DD0000">'parseDB.php'</span><span style="color: #007700">);<br /><br />if&nbsp;(!isset(</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'selection'</span><span style="color: #007700">])<br />OR&nbsp;!</span><span style="color: #0000BB">lancer_phraseur</span><span style="color: #007700">(</span><span style="color: #0000BB">recupereXML</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">80</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PATH_TRAINS</span><span style="color: #007700">)))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type:&nbsp;text/plain;charset=utf-8'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Erreur"</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">session_start</span><span style="color: #007700">();&nbsp;&nbsp;&nbsp;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Type:text/calendar;charset=utf-8'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-Disposition:&nbsp;attachment;&nbsp;filename="mestrains.ics"'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"BEGIN:VCALENDAR\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"VERSION:2.0\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">trainToEvent</span><span style="color: #007700">(</span><span style="color: #0000BB">$trains</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_POST</span><span style="color: #007700">[</span><span style="color: #DD0000">'selection'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'day'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'month'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'year'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"END:VCALENDAR\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;<br /></span>
</span>
</code></p>
<div>Bar&egrave;me<ol class="spip"><li> gestion des valeurs via le cookie</li><li> header content-type</li><li> header content-disposition</li><li> sortie ICS  correcte</li><li> gestion des erreurs</li></ol></div>
</div>
 
 <div id='reponses3621'>
<ul class="forum-total">

<li class="forum-fil" id="forum7379"> 
	    <div class="reponse">
	<div class="forum-titre">R&eacute;ponse 1</div>
14 mai 2014 &agrave; 16h55min 
	<div><div class="spip_code"><code>&lt;?php<br />
if(!isset($_POST['selection']))<br />
 &nbsp;echo &quot;erreur&lt;br&gt;&quot;;<br />
else {<br />
 &nbsp;header(&quot;Content-Type: text/calendar; charset=utf-8&quot;);<br />
 &nbsp;$res=&quot;BEGIN:VCALENDAR&quot;;<br />
 &nbsp;$res.=&quot;VERSION:2.0&quot;;<br />
 &nbsp;$trains=$_POST['selection']);<br />
 &nbsp;foreach($trains as $id=&gt;$train)<br />
 &nbsp; &nbsp;$res .= trainToEvent($trains,$id,$_GET['day'],$_GET['month'],$_GET['year']);<br />
<br />
 &nbsp;$res .= &quot;END:VCALENDAR&quot;;<br />
 &nbsp;return $res;<br />
}<br />
?&gt;</code></div></div>
	    </div>

<ul>

<li id="forum8133" class="correction">
	<div>note&nbsp;3<br />par  adm</div>
	<div><ul class="spip"><li>  gestion des valeurs via le cookie
_&nbsp;: 0</li><li>  header content-type
_&nbsp;: 1</li><li>  header content-disposition
_&nbsp;: 0</li><li>  sortie ICS  correcte
_&nbsp;: 1</li><li>  gestion des erreurs&nbsp;: 1</li></ul></div>
</li>
</ul>

</li>

</ul>

</div><br />

<span id='e3622'></span>

<h2 id='a13'>13 Annexes</h2>

<div class="documents-joints">

<a href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=877&amp;cle=78d4efdc5a301d4e643e1d8447d15180ad0b64ca&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2FBDTrain.xml' type='application/xml' title='XML - - BDTrain.xml'><img src='Ajouts/Licence_pacs_esj6_2013_2014/local/cache-vignettes/L52xH52/xml-50a01-ff1ee.png' width='52' height='52' style='height:52px;width:52px;' alt='' class='spip_logos' /></a><br />BDTrain.xml
<br />
<a href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?action=acceder_document&amp;arg=879&amp;cle=c8b6c23d8d641cd8e10bccd345900dd775a5fbb0&amp;file=distant%2FVCS%2FLI355%2FCC%2F2013-2014%2F2%2Futilitaires.php' type='text/plain' title='texte - - utilitaires.php'><img src='Ajouts/Licence_pacs_esj6_2013_2014/local/cache-vignettes/L52xH52/txt-56069-0182d.png' width='52' height='52' style='height:52px;width:52px;' alt='' class='spip_logos' /></a><br />utilitaires.php

</div>


<div style='text-align:right' id='s1437'>
Fichier &agrave; cr&eacute;er&nbsp;: <tt>listeVilles.php saisieVille.html manipulationDOM.js ajax.js choixDate.php cal.css queryDB.php parseDB.php manipulationTrains.php trains.php trainToEvent.php etapeFinale.php</tt><br />
</div>

 



</div><div id='pied' class='pied_page'><ul>
<li><a href="http://jigsaw.w3.org/css-validator/validator?uri=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2Fpacs-2014fev%2FLe-train-train-habituel"
	rel='noindex nofollow'
	class='validation-css'
	title='v&eacute;rifier la validit&eacute; CSS 2.1'>Valid CSS 2.1</a></li>
<li><a href='http://validator.w3.org/check?uri=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2Fpacs-2014fev%2FLe-train-train-habituel'
	class='validation-xml'
	rel='noindex nofollow'
	title='v&eacute;rifier la validit&eacute; XHTML Baisc 1.1'>Valid XHTML Basic 1.1</a></li>
<li><a href='http://www.contentquality.com/Default.asp?Url1=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2Fpacs-2014fev%2FLe-train-train-habituel&amp;rptmode=2'
	 class='validation-wcag'
	title='v&eacute;rifier la validit&eacute; WCAG 2.0 AAA'>Triple-A conformance Web Content Accessibility Guidelines 2.0</a></li>
<li class='date-publi'>
Calcul&eacute; le 22 mai 2014 &agrave; 23h17min<br />
par 
<a href='https://www-licence.ufr-info-p6.jussieu.fr/lmd/licence/2013/ue/pacs-2014fev/spip.php?page=auteur&amp;id_auteur=1&amp;sujet=Signaler%20un%20souci%20technique%20avec%20le%20site%20PACS%202013%202014' 
	rel='noindex nofollow'
	title='Signaler un souci technique avec le site'>DidacSPIP</a><br />
Universit&eacute; Pierre et Marie Curie
</li>
<li><a href='http://validator.w3.org/mobile/check?docAddr=https%3A%2F%2Fwww-licence.ufr-info-p6.jussieu.fr%2Flmd%2Flicence%2F2013%2Fue%2Fpacs-2014fev%2FLe-train-train-habituel'
	class='mobile-ok'
	rel='noindex nofollow'
	title='v&eacute;rifier la validit&eacute; Mobile OK'>Mobile OK</a></li>
<li><a href='http://www.spip.net'
	class='reference-spip'
	title='Visiter SPIP'>SPIP</a></li>
<li><a href="http://prefetch.validatorsearch.verisignlabs.com"
	rel='noindex nofollow'
	title='voir http://validatorsearch.verisignlabs.com/'></a></li>
</ul></div></div></body>
</html>
